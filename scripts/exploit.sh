#!/bin/bash
# EXPLOITATION SCRIPT

if [ -z "$1" ]; then
    echo "Usage: $0 <target_ip>"
    exit 1
fi

target=$1

echo "Exploiting target: $target"
echo "Performing vulnerability scan..."
nmap --script vuln $target > reports/vulnscan_$target.txt

# Checking IoT vulnerabilities
echo "Checking for common IoT vulnerabilities..."
nmap -p 80,443,8080,8443 --script http-title,http-headers,http-methods,http-enum $target >> reports/iotspecific_$target.txt

echo "Attempting to identify device type..."
nmap -sV -p- $target >> reports/deviceinfo_$target.txt

echo "Generating summary report..."
echo "IoT Device Exploitation Report for $target" > reports/summary_$target.txt
echo "----------------------------------------" >> reports/summary_$target.txt
echo "Vulnerability Scan Results:" >> reports/summary_$target.txt
grep -E "VULNERABLE:|WARNING:" reports/vulnscan_$target.txt >> reports/summary_$target.txt
echo "\nIoT Specific Checks:" >> reports/summary_$target.txt
grep -E "http-|open" reports/iotspecific_$target.txt >> reports/summary_$target.txt
echo "\nDevice Information:" >> reports/summary_$target.txt
grep "Service Info:" reports/deviceinfo_$target.txt >> reports/summary_$target.txt

echo "Exploitation complete. Reports saved in the 'reports' directory."
